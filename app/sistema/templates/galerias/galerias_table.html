<style>
    .teste-w-90 {
        width: 100%;
    }
    .teste-w-15 {
        width: 15%;
    }
    .teste-w-25 {
        width: 25%;
    }

    .gallery {
        display: flex;
        flex-direction: column;
        align-items: start;
    }
    
    .gallery-name {
        margin-bottom: 20px;
        font-size: 24px;
        font-weight: bold;
    }

    .images-container {
        display: flex;
        justify-content: start;
        flex-wrap: wrap;
    }

    .images-container img {
        object-fit: cover;
        max-height: 200px;
        width: auto;
        margin: 0 10px 20px;
    }
</style>
<table class="py-3" id="table" width="100%" style="height: 100%;"
cellspacing="0">
    <thead class="border">
        <tr class="teste-w-90">
            <th class="text-left"></th>
        </tr>
    </thead>
    <tbody>
        {% for galeria in galerias %}
        <tr class="teste-w-90">
            <td>
                <div class="gallery">
                    <div class="d-flex justify-content-between w-100" > 
                        <div class="gallery-name">{{galeria.nome|default_if_none:"Sem nome"}}</div>
                        <div class="position-relative">
                            <button id="showHiddenMenuTable{{galeria.id}}" 
                            class="btn-circle">
                                <i class="fa-solid fa-ellipsis-vertical"></i>                         
                            </button>
                            <div style="display: none; position: absolute; z-index: 2; right: 10%" 
                            id="hiddenMenuContainer{{galeria.id}}" 
                            class="btn-group-custom">
                                <button onclick="openGaleriaModal('{{galeria.id}}')">Editar</button> 
                                {% comment %} <button onclick="openDeleteModal(() => deletarGaleria('{{galeria.id}}'))" >Excluir</button> {% endcomment %}
                            </div>
                        </div>
                    </div>
                    <div class="images-container">
                        {% for imagem in galeria.imagem_set %}
                            <img src="{{imagem.shared_link}}" alt="{{imagem.descricao}}" title="{{imagem.descricao}}">
                        {% endfor %}
                    </div>
                </div>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<script>
    function openGaleriaModal(galeriaId = null) {
        $.ajax({
            url: "/galeriaModal",
            method: "GET",
            data: {
                dp_evento_id: dpEventoId,
                galeria_id: galeriaId
            },
            success: function (data) {
                $("#modalGaleriaContainer").html('');
                $("#modalGaleriaContainer").html(data);
                $('#cadastrarGaleriaModal').modal('show');
            }
        });
    }

    function deletarGaleria(galeria_id) {
        $.ajax({
            url: "/deleteGaleria/"+galeria_id,
            headers: { "X-CSRFToken":  '{{ csrf_token }}' },
            method: "POST",
            success: function (data) {
                carregarGalerias();
            }
        });
    }

    $(document).ready(function() {
       
    });
</script>
